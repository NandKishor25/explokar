(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{8856:function(e,r,a){Promise.resolve().then(a.bind(a,7639))},1066:function(e,r,a){"use strict";a.d(r,{Z:function(){return i}});var t=a(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,r)=>{let a=(0,t.forwardRef)((a,i)=>{let{color:n="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:u="",children:h,...p}=a;return(0,t.createElement)("svg",{ref:i,...s,width:o,height:o,stroke:n,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(l(e)),u].join(" "),...p},[...r.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a}},5137:function(e,r,a){"use strict";a.d(r,{Z:function(){return t}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4109:function(e,r,a){"use strict";a.d(r,{Z:function(){return t}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(1066).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2022:function(e,r,a){"use strict";a.d(r,{Z:function(){return t}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(1066).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6463:function(e,r,a){"use strict";var t=a(1169);a.o(t,"useParams")&&a.d(r,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},7639:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return x}});var t=a(7437),s=a(2265),l=a(6463),i=a(7048),n=a(2022),o=a(5137),d=a(1066);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,d.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var u=a(4109);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,d.Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),p=(0,d.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var m=a(8472),g=a(8726),x=function(){let{currentUser:e,updateUserProfile:r}=(0,i.a)(),a=(0,l.useRouter)(),[d,x]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[b,v]=(0,s.useState)(null),w=(0,s.useRef)(null),[N,j]=(0,s.useState)({displayName:"",photoURL:""});(0,s.useEffect)(()=>{e&&(j({displayName:e.displayName||"",photoURL:e.photoURL||""}),v(e.photoURL))},[e]);let k=async r=>{if(!r.target.files||0===r.target.files.length)return;let a=r.target.files[0];if(!["image/jpeg","image/png","image/gif","image/webp"].includes(a.type)){g.ZP.error("Only JPEG, PNG, GIF, and WEBP files are allowed.");return}if(a.size>5242880){g.ZP.error("File size must be less than 5MB.");return}let t=new FileReader;t.onload=()=>v(t.result),t.readAsDataURL(a),y(!0);try{let e=new FormData;e.append("image",a);let r=await m.Z.post("/api/upload",e,{headers:{"Content-Type":"multipart/form-data"}});j(e=>({...e,photoURL:r.data.url})),g.ZP.success("Image uploaded!")}catch(r){console.error("Upload error:",r),g.ZP.error("Failed to upload image"),v((null==e?void 0:e.photoURL)||null)}finally{y(!1)}},Z=async e=>{if(e.preventDefault(),!N.displayName.trim()){g.ZP.error("Display name can't be empty");return}x(!0);try{await r(N),g.ZP.success("Profile updated successfully"),a.push("/profile")}catch(e){g.ZP.error("Failed to update profile")}finally{x(!1)}};return e?(0,t.jsx)("div",{className:"min-h-screen bg-[#F8FAFC] py-12 px-4",children:(0,t.jsxs)("div",{className:"max-w-xl mx-auto",children:[(0,t.jsxs)("button",{onClick:()=>a.push("/profile"),className:"group mb-8 flex items-center text-gray-500 hover:text-indigo-600 transition-colors font-medium",children:[(0,t.jsx)("div",{className:"p-2 bg-white rounded-xl shadow-sm mr-3 group-hover:bg-indigo-50 transition-all",children:(0,t.jsx)(o.Z,{className:"w-5 h-5"})}),"Back to Profile"]}),(0,t.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-2xl shadow-gray-200/50 overflow-hidden border border-gray-100",children:[(0,t.jsx)("div",{className:"h-32 bg-gradient-to-r from-indigo-600 to-violet-600 relative",children:(0,t.jsx)("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-white via-transparent to-transparent"})}),(0,t.jsx)("div",{className:"px-8 pb-10",children:(0,t.jsxs)("form",{onSubmit:Z,className:"relative -mt-16",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center mb-10",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("div",{onClick:()=>{var e;null===(e=w.current)||void 0===e||e.click()},className:"w-32 h-32 rounded-[2.5rem] border-[6px] border-white overflow-hidden bg-gray-100 shadow-2xl cursor-pointer relative",children:[b?(0,t.jsx)("img",{src:b,alt:"Preview",className:"w-full h-full object-cover transition-all duration-500 ".concat(f?"opacity-40 blur-[2px]":"group-hover:scale-110")}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-indigo-50 text-indigo-400",children:(0,t.jsx)(n.Z,{className:"w-12 h-12"})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-indigo-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 backdrop-blur-sm",children:(0,t.jsx)(c,{className:"text-white w-8 h-8"})}),f&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)(u.Z,{className:"w-8 h-8 text-indigo-600 animate-spin"})})]}),(0,t.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-white p-2 rounded-2xl shadow-lg border border-gray-100",children:(0,t.jsx)("div",{className:"bg-indigo-600 p-1.5 rounded-xl",children:(0,t.jsx)(h,{className:"w-4 h-4 text-white"})})})]}),(0,t.jsx)("input",{type:"file",ref:w,className:"hidden",accept:"image/*",onChange:k}),(0,t.jsx)("h2",{className:"mt-4 text-2xl font-black text-gray-900 tracking-tight",children:"Personal Info"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Update your identity across the platform"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{htmlFor:"displayName",className:"block text-xs font-bold text-indigo-600 uppercase tracking-widest mb-2 ml-1",children:"Display Name"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",id:"displayName",name:"displayName",placeholder:"e.g. Alex Traveler",value:N.displayName,onChange:e=>j({...N,displayName:e.target.value}),className:"block w-full px-5 py-4 bg-gray-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-500 focus:ring-0 transition-all text-gray-900 font-medium placeholder:text-gray-400"}),(0,t.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-300",children:(0,t.jsx)(n.Z,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"pt-4 flex gap-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>a.push("/profile"),className:"flex-1 px-6 py-4 border-2 border-gray-100 rounded-2xl text-sm font-bold text-gray-500 hover:bg-gray-50 hover:border-gray-200 transition-all",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:d||f,className:"flex-[2] relative overflow-hidden group bg-indigo-600 px-6 py-4 rounded-2xl text-sm font-bold text-white shadow-xl shadow-indigo-200 hover:bg-indigo-700 disabled:opacity-70 transition-all",children:(0,t.jsx)("div",{className:"relative z-10 flex items-center justify-center gap-2",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{className:"w-5 h-5 animate-spin"}),(0,t.jsx)("span",{children:"Saving Changes..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{className:"w-5 h-5 transition-transform group-hover:scale-110"}),(0,t.jsx)("span",{children:"Save Settings"})]})})})]})]})]})})]}),(0,t.jsxs)("div",{className:"mt-8 bg-indigo-50/50 rounded-2xl p-4 border border-indigo-100/50 flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-white p-2 rounded-xl shadow-sm",children:(0,t.jsx)(h,{className:"w-5 h-5 text-indigo-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-bold text-indigo-900",children:"Quick Tip"}),(0,t.jsx)("p",{className:"text-xs text-indigo-700/70 mt-0.5",children:"Using a real name helps your travel buddies recognize you more easily during trip planning."})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-3xl shadow-xl text-center max-w-sm w-full",children:[(0,t.jsx)("div",{className:"bg-red-50 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(n.Z,{className:"text-red-500"})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-500 mt-2",children:"Please log in to edit your profile settings."})]})})}},7048:function(e,r,a){"use strict";a.d(r,{a:function(){return l}});var t=a(1444),s=a(7594);function l(){let e=(0,t.I0)(),{currentUser:r,loading:a,error:l}=(0,t.v9)(e=>e.auth);return{currentUser:r,loading:a,error:l,register:(r,a,t)=>e((0,s.z2)({email:r,password:a,name:t})),login:(r,a)=>e((0,s.x4)({email:r,password:a})),loginWithGoogle:()=>e((0,s.Cb)()),logout:()=>e((0,s.kS)()),updateUserProfile:r=>e((0,s.Lj)(r))}}},7594:function(e,r,a){"use strict";a.d(r,{ZP:function(){return N},uJ:function(){return h},x4:function(){return m},Cb:function(){return g},kS:function(){return x},z2:function(){return p},Lj:function(){return f}});var t=a(6862),s=a(5735),l=a(5236),i=a(9854);let n=(0,l.ZF)({apiKey:"AIzaSyCGhp1cC_bCwRHFzSrI3yTDJ9LOOlZy1i4",authDomain:"explokar-a27aa.firebaseapp.com",projectId:"explokar-a27aa",storageBucket:"explokar-a27aa.firebasestorage.app",messagingSenderId:"672347253575",appId:"1:672347253575:web:24ab4e1304c83a01277a62"}),o=(0,s.v0)(n);(0,i.cF)(n);var d=a(8472),c=a(8726);let u=e=>({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}),h=(0,t.hg)("auth/initialize",async(e,r)=>{let{dispatch:a}=r;return new Promise(e=>{let r=(0,s.Aj)(o,t=>{a(b(t?u(t):null)),r(),e()})})}),p=(0,t.hg)("auth/register",async(e,r)=>{let{email:a,password:t,name:l}=e,{rejectWithValue:i}=r;try{let e=await (0,s.Xb)(o,a,t);return await (0,s.ck)(e.user,{displayName:l}),await d.Z.post("/api/auth",{uid:e.user.uid,email:e.user.email,name:l,photoURL:e.user.photoURL||""}),u(e.user)}catch(e){return console.error("Error during registration:",e),c.ZP.error(e.message),i(e.message)}}),m=(0,t.hg)("auth/login",async(e,r)=>{let{email:a,password:t}=e,{rejectWithValue:l}=r;try{let e=await (0,s.e5)(o,a,t);return u(e.user)}catch(e){return console.error("Error during login:",e),c.ZP.error(e.message),l(e.message)}}),g=(0,t.hg)("auth/loginWithGoogle",async(e,r)=>{let{rejectWithValue:a}=r;try{let e=new s.hJ,r=await (0,s.rh)(o,e);try{await d.Z.post("/api/auth",{uid:r.user.uid,email:r.user.email,name:r.user.displayName,photoURL:r.user.photoURL||""})}catch(e){console.log("User might already exist in the database.")}return u(r.user)}catch(e){return"auth/popup-blocked"===e.code?await (0,s.F6)(o,new s.hJ):(console.error("Error during Google login:",e),c.ZP.error(e.message)),a(e.message)}}),x=(0,t.hg)("auth/logout",async(e,r)=>{let{rejectWithValue:a}=r;try{await (0,s.w7)(o),c.ZP.success("Successfully logged out")}catch(e){return console.error("Error during logout:",e),c.ZP.error("Failed to log out"),a(e.message)}}),f=(0,t.hg)("auth/updateProfile",async(e,r)=>{let{getState:a,rejectWithValue:t}=r;a();let l=o.currentUser;if(!l)return t("No user logged in");try{return await (0,s.ck)(l,e),await d.Z.put("/api/auth/".concat(l.uid),{name:e.displayName,photoURL:e.photoURL}),c.ZP.success("Profile updated successfully"),e}catch(e){return console.error("Error updating profile:",e),c.ZP.error("Failed to update profile"),t(e.message)}}),y=(0,t.oM)({name:"auth",initialState:{currentUser:null,loading:!0,error:null},reducers:{setUser:(e,r)=>{e.currentUser=r.payload,e.loading=!1},setLoading:(e,r)=>{e.loading=r.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(p.pending,e=>{e.loading=!0,e.error=null}).addCase(p.fulfilled,(e,r)=>{e.currentUser=r.payload,e.loading=!1}).addCase(p.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}).addCase(m.pending,e=>{e.loading=!0,e.error=null}).addCase(m.fulfilled,(e,r)=>{e.currentUser=r.payload,e.loading=!1}).addCase(m.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}).addCase(g.pending,e=>{e.loading=!0,e.error=null}).addCase(g.fulfilled,(e,r)=>{e.currentUser=r.payload,e.loading=!1}).addCase(g.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}).addCase(x.fulfilled,e=>{e.currentUser=null}).addCase(f.fulfilled,(e,r)=>{e.currentUser&&(e.currentUser={...e.currentUser,...r.payload})})}}),{setUser:b,setLoading:v,clearError:w}=y.actions;var N=y.reducer}},function(e){e.O(0,[139,18,344,971,23,744],function(){return e(e.s=8856)}),_N_E=e.O()}]);