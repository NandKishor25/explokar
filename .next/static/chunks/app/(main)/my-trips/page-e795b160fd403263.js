(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[870],{5774:function(e,t,a){Promise.resolve().then(a.bind(a,4044))},2030:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]])},2513:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4044:function(e,t,a){"use strict";a.r(t);var r=a(7437),s=a(2265),i=a(6463),n=a(7048),l=a(6223),o=a(9880),c=a(2030),d=a(2513);t.default=()=>{let{currentUser:e,loading:t}=(0,n.a)(),a=(0,i.useRouter)(),[u,p]=(0,s.useState)([]),[h,x]=(0,s.useState)(!0),[g,m]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let a=async()=>{if(!e){x(!1);return}try{x(!0),m(null);let t=await l.e.getUserTrips(e.uid);p(Array.isArray(t)?t:[])}catch(e){console.error("Error fetching user trips:",e),m("Failed to load your trips. Please try again later."),p([])}finally{x(!1)}};t||a()},[e,t]),t||h)?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-24 pb-12",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})})}):e?g?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-24 pb-12",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:[(0,r.jsx)("p",{className:"text-red-600 text-lg",children:g}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors",children:"Retry"})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-24 pb-12",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"My Trips"}),(0,r.jsx)("p",{className:"text-slate-600",children:"Manage and view all your created trips"})]}),u.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(e=>(0,r.jsx)(o.Z,{trip:e},e._id))}):(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)("div",{className:"w-24 h-24 bg-blue-50 rounded-full flex items-center justify-center",children:(0,r.jsx)(c.Z,{className:"w-12 h-12 text-blue-600",strokeWidth:2})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-3",children:"No trips yet"}),(0,r.jsx)("p",{className:"text-slate-600 mb-8 max-w-md mx-auto",children:"You haven't created any trips yet. Start planning your next adventure and share it with fellow travelers!"}),(0,r.jsxs)("button",{onClick:()=>a.push("/create-trip"),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors font-medium shadow-lg shadow-blue-500/20",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5"}),"Create Your First Trip"]})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-24 pb-12",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-2xl p-8 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please log in to view your trips"}),(0,r.jsx)("button",{onClick:()=>a.push("/login"),className:"px-6 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors font-medium shadow-lg shadow-blue-500/20",children:"Log In"})]})})})}},9880:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(7437);a(2265);var s=a(7138),i=a(9321),n=a(4241),l=a(1240);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a(1066).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var c=a(6235),d=a(8726),u=e=>{let{trip:t}=e,a=async e=>{e.preventDefault(),e.stopPropagation();let a="".concat(window.location.origin,"/trip/").concat(t._id),r={title:t.title,text:"Check out this trip to ".concat(t.destination,"!"),url:a};try{navigator.share?await navigator.share(r):(await navigator.clipboard.writeText(a),d.ZP.success("Link copied to clipboard!"))}catch(e){console.error("Error sharing:",e)}};return(0,r.jsxs)("div",{className:"relative group bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow border border-gray-100",children:[(0,r.jsxs)(s.default,{href:"/trip/".concat(t._id),className:"block p-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 pr-8 line-clamp-2",children:t.title})}),(0,r.jsxs)("div",{className:"flex items-center text-gray-600 mb-3",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4 mr-2 flex-shrink-0 text-indigo-500"}),(0,r.jsx)("span",{className:"truncate",children:t.destination})]}),(0,r.jsxs)("div",{className:"flex items-center text-gray-600 mb-3",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4 mr-2 flex-shrink-0 text-indigo-500"}),(0,r.jsxs)("span",{className:"truncate",children:[(e=>{let t=new Date(e);return(0,c.WU)(t,"MMM d, yyyy")})(t.startDate)," â€¢ ",t.duration," days"]})]}),(0,r.jsxs)("div",{className:"flex items-center text-gray-600 mb-6",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 mr-2 flex-shrink-0 text-indigo-500"}),(0,r.jsxs)("span",{children:[t.participants.length,"/",t.maxParticipants," travelers"]})]}),(0,r.jsxs)("div",{className:"flex items-center pt-4 border-t border-gray-100",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden mr-3 flex-shrink-0 ring-2 ring-gray-50",children:t.createdBy.photoURL?(0,r.jsx)("img",{src:t.createdBy.photoURL,alt:t.createdBy.name,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-indigo-100 text-indigo-600 text-sm font-bold",children:t.createdBy.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700 truncate",children:["By ",t.createdBy.name]})]})]}),(0,r.jsx)("button",{onClick:a,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-full transition-all focus:outline-none","aria-label":"Share trip",title:"Share trip",children:(0,r.jsx)(o,{className:"w-5 h-5"})})]})}},7048:function(e,t,a){"use strict";a.d(t,{a:function(){return i}});var r=a(1444),s=a(7594);function i(){let e=(0,r.I0)(),{currentUser:t,loading:a,error:i}=(0,r.v9)(e=>e.auth);return{currentUser:t,loading:a,error:i,register:(t,a,r)=>e((0,s.z2)({email:t,password:a,name:r})),login:(t,a)=>e((0,s.x4)({email:t,password:a})),loginWithGoogle:()=>e((0,s.Cb)()),logout:()=>e((0,s.kS)()),updateUserProfile:t=>e((0,s.Lj)(t))}}},4438:function(e,t,a){"use strict";let r=a(8472).Z.create({headers:{"Content-Type":"application/json"}});t.Z=r},6223:function(e,t,a){"use strict";a.d(t,{e:function(){return s}});var r=a(4438);let s={searchTrips:async e=>(await r.Z.get("/api/trips/search?".concat(e.toString()))).data,getTripById:async e=>(await r.Z.get("/api/trips/".concat(e))).data,getUserTrips:async e=>(await r.Z.get("/api/trips/user/".concat(e))).data,createTrip:async e=>(await r.Z.post("/api/trips",e)).data,deleteTrip:async e=>(await r.Z.delete("/api/trips/".concat(e))).data,joinTrip:async(e,t)=>(await r.Z.post("/api/trips/".concat(e,"/join"),t)).data,leaveTrip:async(e,t)=>(await r.Z.post("/api/trips/".concat(e,"/leave"),t)).data,getComments:async e=>(await r.Z.get("/api/trips/".concat(e,"/comments"))).data,addComment:async(e,t)=>(await r.Z.post("/api/trips/".concat(e,"/comments"),t)).data,getExpenses:async e=>{try{return(await r.Z.get("/api/trips/".concat(e,"/expenses"))).data}catch(e){return console.warn("Expense API not ready, returning mock data"),[]}},addExpense:async(e,t)=>(await r.Z.post("/api/trips/".concat(e,"/expenses"),t)).data,deleteExpense:async(e,t)=>(await r.Z.delete("/api/trips/".concat(e,"/expenses/").concat(t))).data}},7594:function(e,t,a){"use strict";a.d(t,{ZP:function(){return v},uJ:function(){return p},x4:function(){return x},Cb:function(){return g},kS:function(){return m},z2:function(){return h},Lj:function(){return y}});var r=a(6862),s=a(5735),i=a(5236),n=a(9854);let l=(0,i.ZF)({apiKey:"AIzaSyCGhp1cC_bCwRHFzSrI3yTDJ9LOOlZy1i4",authDomain:"explokar-a27aa.firebaseapp.com",projectId:"explokar-a27aa",storageBucket:"explokar-a27aa.firebasestorage.app",messagingSenderId:"672347253575",appId:"1:672347253575:web:24ab4e1304c83a01277a62"}),o=(0,s.v0)(l);(0,n.cF)(l);var c=a(8472),d=a(8726);let u=e=>({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}),p=(0,r.hg)("auth/initialize",async(e,t)=>{let{dispatch:a}=t;return new Promise(e=>{let t=(0,s.Aj)(o,r=>{a(w(r?u(r):null)),t(),e()})})}),h=(0,r.hg)("auth/register",async(e,t)=>{let{email:a,password:r,name:i}=e,{rejectWithValue:n}=t;try{let e=await (0,s.Xb)(o,a,r);return await (0,s.ck)(e.user,{displayName:i}),await c.Z.post("/api/auth",{uid:e.user.uid,email:e.user.email,name:i,photoURL:e.user.photoURL||""}),u(e.user)}catch(e){return console.error("Error during registration:",e),d.ZP.error(e.message),n(e.message)}}),x=(0,r.hg)("auth/login",async(e,t)=>{let{email:a,password:r}=e,{rejectWithValue:i}=t;try{let e=await (0,s.e5)(o,a,r);return u(e.user)}catch(e){return console.error("Error during login:",e),d.ZP.error(e.message),i(e.message)}}),g=(0,r.hg)("auth/loginWithGoogle",async(e,t)=>{let{rejectWithValue:a}=t;try{let e=new s.hJ,t=await (0,s.rh)(o,e);try{await c.Z.post("/api/auth",{uid:t.user.uid,email:t.user.email,name:t.user.displayName,photoURL:t.user.photoURL||""})}catch(e){console.log("User might already exist in the database.")}return u(t.user)}catch(e){return"auth/popup-blocked"===e.code?await (0,s.F6)(o,new s.hJ):(console.error("Error during Google login:",e),d.ZP.error(e.message)),a(e.message)}}),m=(0,r.hg)("auth/logout",async(e,t)=>{let{rejectWithValue:a}=t;try{await (0,s.w7)(o),d.ZP.success("Successfully logged out")}catch(e){return console.error("Error during logout:",e),d.ZP.error("Failed to log out"),a(e.message)}}),y=(0,r.hg)("auth/updateProfile",async(e,t)=>{let{getState:a,rejectWithValue:r}=t;a();let i=o.currentUser;if(!i)return r("No user logged in");try{return await (0,s.ck)(i,e),await c.Z.put("/api/auth/".concat(i.uid),{name:e.displayName,photoURL:e.photoURL}),d.ZP.success("Profile updated successfully"),e}catch(e){return console.error("Error updating profile:",e),d.ZP.error("Failed to update profile"),r(e.message)}}),f=(0,r.oM)({name:"auth",initialState:{currentUser:null,loading:!0,error:null},reducers:{setUser:(e,t)=>{e.currentUser=t.payload,e.loading=!1},setLoading:(e,t)=>{e.loading=t.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(h.pending,e=>{e.loading=!0,e.error=null}).addCase(h.fulfilled,(e,t)=>{e.currentUser=t.payload,e.loading=!1}).addCase(h.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(x.pending,e=>{e.loading=!0,e.error=null}).addCase(x.fulfilled,(e,t)=>{e.currentUser=t.payload,e.loading=!1}).addCase(x.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(g.pending,e=>{e.loading=!0,e.error=null}).addCase(g.fulfilled,(e,t)=>{e.currentUser=t.payload,e.loading=!1}).addCase(g.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(m.fulfilled,e=>{e.currentUser=null}).addCase(y.fulfilled,(e,t)=>{e.currentUser&&(e.currentUser={...e.currentUser,...t.payload})})}}),{setUser:w,setLoading:b,clearError:j}=f.actions;var v=f.reducer}},function(e){e.O(0,[139,18,344,233,839,971,23,744],function(){return e(e.s=5774)}),_N_E=e.O()}]);