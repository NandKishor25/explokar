(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[906],{1876:function(e,t,s){Promise.resolve().then(s.bind(s,7656))},2335:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]])},4872:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]])},6081:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},1077:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},996:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},9338:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},4542:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]])},4697:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7656:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var r=s(7437),a=s(2265),i=s(6463),n=s(7138),l=s(7048),d=s(996),o=s(4542),c=s(6081),m=s(4872),u=s(2335),x=s(9321),h=s(4241),g=s(1077),p=s(1240);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,s(1066).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var y=s(6223),b=s(8726),j=s(6235),w=s(4697),v=s(9338),N=s(6648),k=e=>{let{isOpen:t,onClose:s,reviewerId:i,revieweeId:n,revieweeName:l,tripId:d}=e,[o,c]=(0,a.useState)(0),[m,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(0),[g,p]=(0,a.useState)(!1);if(!t)return null;let f=async e=>{if(e.preventDefault(),0===o){b.ZP.error("Please select a rating");return}try{p(!0),await N.p.createReview({reviewer:i,reviewee:n,tripId:d,rating:o,comment:m}),b.ZP.success("Review submitted for ".concat(l)),s(),c(0),u("")}catch(e){var t,r;console.error("Error submitting review:",e),(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)?b.ZP.error(e.response.data.message):b.ZP.error("Failed to submit review")}finally{p(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto w-screen h-screen",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:s,children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),(0,r.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full",children:(0,r.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Rate ",l]}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,r.jsx)(w.Z,{className:"w-6 h-6"})})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("form",{onSubmit:f,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),(0,r.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(e=>(0,r.jsx)("button",{type:"button",className:"focus:outline-none transition-colors",onMouseEnter:()=>h(e),onMouseLeave:()=>h(0),onClick:()=>c(e),children:(0,r.jsx)(v.Z,{className:"w-8 h-8 ".concat(e<=(x||o)?"text-amber-400 fill-current":"text-gray-300")})},e))}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:o>0?"You selected ".concat(o," stars"):"Select stars to rate"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comment"}),(0,r.jsx)("textarea",{id:"comment",rows:4,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md p-3 border",placeholder:"Share your experience travelling with them...",value:m,onChange:e=>u(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[(0,r.jsx)("button",{type:"submit",disabled:g,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm disabled:opacity-50",children:g?"Submitting...":"Submit Review"}),(0,r.jsx)("button",{type:"button",onClick:s,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:"Cancel"})]})]})})]})})]})})},Z=e=>{let{params:t}=e,{id:s}=t,{currentUser:w}=(0,l.a)(),v=(0,i.useRouter)(),[N,Z]=(0,a.useState)(null),[C,U]=(0,a.useState)([]),[P,S]=(0,a.useState)(""),[R,L]=(0,a.useState)(!0),[M,I]=(0,a.useState)(!1),[T,D]=(0,a.useState)(!1),[B,E]=(0,a.useState)(!1),[z,A]=(0,a.useState)(null),[F,q]=(0,a.useState)(!1),[H,G]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=async()=>{try{L(!0);let e=await y.e.getTripById(s);Z(e);let t=await y.e.getComments(s);U(t)}catch(e){console.error("Error fetching trip details:",e),b.ZP.error("Failed to load trip details")}finally{L(!1)}};s&&e()},[s]);let O=async()=>{if(w)try{D(!0),await y.e.leaveTrip(s,{userId:w.uid}),N&&Z({...N,participants:N.participants.filter(e=>e.userId!==w.uid)}),b.ZP.success("Successfully left the trip")}catch(e){console.error("Error leaving trip:",e),b.ZP.error("Failed to leave trip")}finally{D(!1)}},_=async()=>{if(N&&w&&window.confirm("Are you sure you want to delete this trip? This action cannot be undone."))try{L(!0),await y.e.deleteTrip(s),b.ZP.success("Trip deleted successfully"),v.push("/")}catch(e){console.error("Error deleting trip:",e),b.ZP.error("Failed to delete trip"),L(!1)}},J=async e=>{if(e.preventDefault(),!w){b.ZP.error("You must be logged in to comment");return}if(P.trim())try{I(!0);let e=await y.e.addComment(s,{userId:w.uid,userName:w.displayName||"User",userPhoto:w.photoURL||"",text:P});U([...C,e]),S(""),b.ZP.success("Comment added")}catch(e){console.error("Error adding comment:",e),b.ZP.error("Failed to add comment")}finally{I(!1)}},W=e=>{if(!e)return"Date not set";let t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";try{return(0,j.WU)(t,"MMMM d, yyyy")}catch(e){return"Invalid Date"}},Y=()=>!!w&&!!N&&N.participants.some(e=>e.userId===w.uid),V=()=>{if(!N)return null;switch(N.transportMode){case"flight":return(0,r.jsx)(d.Z,{className:"w-5 h-5 text-indigo-600"});case"train":return(0,r.jsx)(o.Z,{className:"w-5 h-5 text-indigo-600"});case"car":return(0,r.jsx)(c.Z,{className:"w-5 h-5 text-indigo-600"});case"bus":return(0,r.jsx)(m.Z,{className:"w-5 h-5 text-indigo-600"});case"bike":return(0,r.jsx)(u.Z,{className:"w-5 h-5 text-indigo-600"});default:return null}};if(R)return(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})});if(!N)return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Trip not found"}),(0,r.jsx)(n.default,{href:"/",className:"text-indigo-600 hover:text-indigo-800",children:"Return to home page"})]});let X=async e=>{if(e.preventDefault(),w)try{D(!0),await y.e.joinTrip(s,{userId:w.uid,name:w.displayName||"User",photoURL:w.photoURL||"",message:H}),b.ZP.success("Request sent successfully!"),q(!1)}catch(s){var t,r;console.error("Error joining trip:",s);let e=(null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||s.message||"Failed to send request";b.ZP.error(e)}finally{D(!1)}};return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[F&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-2xl transform transition-all",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Request to Join"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4 text-sm",children:"Send a message to the trip organizer introducing yourself."}),(0,r.jsxs)("form",{onSubmit:X,children:[(0,r.jsx)("textarea",{value:H,onChange:e=>G(e.target.value),placeholder:"Hi! I'd love to join your trip because...",className:"w-full border border-gray-300 rounded-lg p-3 mb-4 focus:ring-2 focus:ring-indigo-500 focus:border-transparent min-h-[100px]",required:!0}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:T,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:T?"Sending...":"Send Request"})]})]})]})}),(0,r.jsxs)("div",{className:"relative h-96 rounded-xl overflow-hidden mb-8",children:[(0,r.jsx)("img",{src:N.imageUrl||"https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",alt:N.title,className:"w-full h-full object-cover"}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col justify-end p-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:N.title}),(0,r.jsxs)("div",{className:"flex items-center text-white mb-4",children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 mr-1"}),(0,r.jsxs)("span",{className:"text-lg",children:[N.startLocation," to ",N.destination]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-white",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4 mr-1"}),(0,r.jsx)("span",{children:W(N.startDate)})]}),(0,r.jsx)("div",{className:"flex items-center bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-white",children:(0,r.jsxs)("span",{children:[N.duration," days"]})}),N.transportMode&&(0,r.jsxs)("div",{className:"flex items-center bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-white",children:[V(),(0,r.jsx)("span",{className:"ml-1 capitalize",children:N.transportMode})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Trip Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Start Date"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:W(N.startDate)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"}),(0,r.jsxs)("p",{className:"text-lg font-medium",children:[N.duration," days"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"From"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:N.startLocation})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"To"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:N.destination})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Transport"}),(0,r.jsxs)("div",{className:"flex items-center",children:[V(),(0,r.jsx)("span",{className:"ml-1 text-lg font-medium capitalize",children:N.transportMode})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Budget"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(g.Z,{className:"w-5 h-5 text-indigo-600"}),(0,r.jsx)("span",{className:"ml-1 text-lg font-medium",children:N.budget?"$".concat(N.budget):"Not specified"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Group Size"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5 text-indigo-600"}),(0,r.jsxs)("span",{className:"ml-1 text-lg font-medium",children:[N.participants.length," / ",N.maxParticipants+1," travelers"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Preferred Gender"}),(0,r.jsx)("p",{className:"text-lg font-medium capitalize",children:N.preferredGender})]})]}),N.activities&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Activities"}),(0,r.jsx)("p",{className:"text-lg",children:N.activities})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"}),(0,r.jsx)("p",{className:"text-lg whitespace-pre-line",children:N.description})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Comments"}),w?(0,r.jsx)("form",{onSubmit:J,className:"mb-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:w.photoURL?(0,r.jsx)("img",{src:w.photoURL,alt:w.displayName||"User",className:"h-10 w-10 rounded-full"}):(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:w.displayName?w.displayName.charAt(0).toUpperCase():"U"})}),(0,r.jsx)("div",{className:"min-w-0 flex-1",children:(0,r.jsxs)("div",{className:"border border-gray-300 rounded-lg shadow-sm overflow-hidden focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500",children:[(0,r.jsx)("textarea",{rows:3,name:"comment",id:"comment",className:"block w-full py-3 px-4 border-0 resize-none focus:ring-0 focus:outline-none sm:text-sm",placeholder:"Add a comment...",value:P,onChange:e=>S(e.target.value)}),(0,r.jsx)("div",{className:"py-2 px-4 bg-gray-50 flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:M||!P.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:M?"Posting...":"Post"})})]})})]})}):(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-center",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"You need to be logged in to comment"}),(0,r.jsx)(n.default,{href:"/login",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Log in"})]}),0===C.length?(0,r.jsxs)("div",{className:"text-center py-6",children:[(0,r.jsx)(f,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No comments yet"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Be the first to share your thoughts."})]}):(0,r.jsx)("div",{className:"space-y-6",children:C.map(e=>(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:e.userPhoto?(0,r.jsx)("img",{src:e.userPhoto,alt:e.userName,className:"h-10 w-10 rounded-full"}):(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:e.userName.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:e.userName}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-700",children:e.text})]})]},e._id))})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-1",children:[(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Trip Organizer"}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{className:"h-12 w-12 rounded-full overflow-hidden mr-4",children:N.createdBy.photoURL?(0,r.jsx)("img",{src:N.createdBy.photoURL,alt:N.createdBy.name,className:"h-full w-full object-cover"}):(0,r.jsx)("div",{className:"h-full w-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:N.createdBy.name.charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:N.createdBy.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:N.createdBy.email})]})]}),w&&w.uid!==N.userId&&Y()&&(0,r.jsx)("button",{onClick:()=>{A({uid:N.userId,name:N.createdBy.name}),E(!0)},className:"mt-3 text-xs bg-indigo-50 text-indigo-600 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition-colors font-medium border border-indigo-100",children:"Rate Organizer"})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Participants"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full overflow-hidden mr-3",children:N.createdBy.photoURL?(0,r.jsx)("img",{src:N.createdBy.photoURL,alt:N.createdBy.name,className:"h-full w-full object-cover"}):(0,r.jsx)("div",{className:"h-full w-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:N.createdBy.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:N.createdBy.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Organizer"})]}),w&&w.uid!==N.userId&&Y()&&(0,r.jsx)("button",{onClick:()=>{A({uid:N.userId,name:N.createdBy.name}),E(!0)},className:"text-xs bg-indigo-50 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-100 transition-colors",children:"Rate"})]}),N.participants.map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full overflow-hidden mr-3",children:e.photoURL?(0,r.jsx)("img",{src:e.photoURL,alt:e.name,className:"h-full w-full object-cover"}):(0,r.jsx)("div",{className:"h-full w-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:e.name.charAt(0).toUpperCase()})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name})}),w&&w.uid!==e.userId&&Y()&&(0,r.jsx)("button",{onClick:()=>{A({uid:e.userId,name:e.name}),E(!0)},className:"text-xs bg-indigo-50 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-100 transition-colors",children:"Rate"})]},e.userId)),Array.from({length:N.maxParticipants-N.participants.length}).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center opacity-50",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 mr-3 flex items-center justify-center",children:(0,r.jsx)(p.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-400",children:"Available Spot"})]},t))]})]}),z&&w&&(0,r.jsx)(k,{isOpen:B,onClose:()=>E(!1),reviewerId:w.uid,revieweeId:z.uid,revieweeName:z.name,tripId:s}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[Y()&&(0,r.jsx)(n.default,{href:"/trip/".concat(s,"/expenses"),className:"block w-full text-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 mb-3",children:"Manage Expenses"}),!(w&&N&&N.userId===w.uid)&&(0,r.jsx)(r.Fragment,{children:Y()?(0,r.jsx)("button",{onClick:O,disabled:T,className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:T?"Processing...":"Leave Trip"}):N.participants.length<N.maxParticipants?(0,r.jsx)("button",{onClick:()=>{if(!w){v.push("/login");return}q(!0)},disabled:T,className:"w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:w?T?"Processing...":"Request to Join":"Login to Join"}):(0,r.jsx)("button",{disabled:!0,className:"w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-400 cursor-not-allowed",children:"Trip Full"})}),!!w&&!!N&&N.userId===w.uid&&(0,r.jsx)("button",{onClick:_,className:"w-full px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50",children:"Delete Trip"})]})]})]})}},7048:function(e,t,s){"use strict";s.d(t,{a:function(){return i}});var r=s(1444),a=s(7594);function i(){let e=(0,r.I0)(),{currentUser:t,loading:s,error:i}=(0,r.v9)(e=>e.auth);return{currentUser:t,loading:s,error:i,register:(t,s,r)=>e((0,a.z2)({email:t,password:s,name:r})),login:(t,s)=>e((0,a.x4)({email:t,password:s})),loginWithGoogle:()=>e((0,a.Cb)()),logout:()=>e((0,a.kS)()),updateUserProfile:t=>e((0,a.Lj)(t))}}},4438:function(e,t,s){"use strict";let r=s(8472).Z.create({headers:{"Content-Type":"application/json"}});t.Z=r},6648:function(e,t,s){"use strict";s.d(t,{p:function(){return a}});var r=s(4438);let a={createReview:async e=>(await r.Z.post("/api/reviews",e)).data,getUserReviews:async e=>(await r.Z.get("/api/reviews/user/".concat(e))).data}},6223:function(e,t,s){"use strict";s.d(t,{e:function(){return a}});var r=s(4438);let a={searchTrips:async e=>(await r.Z.get("/api/trips/search?".concat(e.toString()))).data,getTripById:async e=>(await r.Z.get("/api/trips/".concat(e))).data,getUserTrips:async e=>(await r.Z.get("/api/trips/user/".concat(e))).data,createTrip:async e=>(await r.Z.post("/api/trips",e)).data,deleteTrip:async e=>(await r.Z.delete("/api/trips/".concat(e))).data,joinTrip:async(e,t)=>(await r.Z.post("/api/trips/".concat(e,"/join"),t)).data,leaveTrip:async(e,t)=>(await r.Z.post("/api/trips/".concat(e,"/leave"),t)).data,getComments:async e=>(await r.Z.get("/api/trips/".concat(e,"/comments"))).data,addComment:async(e,t)=>(await r.Z.post("/api/trips/".concat(e,"/comments"),t)).data,getExpenses:async e=>{try{return(await r.Z.get("/api/trips/".concat(e,"/expenses"))).data}catch(e){return console.warn("Expense API not ready, returning mock data"),[]}},addExpense:async(e,t)=>(await r.Z.post("/api/trips/".concat(e,"/expenses"),t)).data,deleteExpense:async(e,t)=>(await r.Z.delete("/api/trips/".concat(e,"/expenses/").concat(t))).data}},7594:function(e,t,s){"use strict";s.d(t,{ZP:function(){return v},uJ:function(){return u},x4:function(){return h},Cb:function(){return g},kS:function(){return p},z2:function(){return x},Lj:function(){return f}});var r=s(6862),a=s(5735),i=s(5236),n=s(9854);let l=(0,i.ZF)({apiKey:"AIzaSyCGhp1cC_bCwRHFzSrI3yTDJ9LOOlZy1i4",authDomain:"explokar-a27aa.firebaseapp.com",projectId:"explokar-a27aa",storageBucket:"explokar-a27aa.firebasestorage.app",messagingSenderId:"672347253575",appId:"1:672347253575:web:24ab4e1304c83a01277a62"}),d=(0,a.v0)(l);(0,n.cF)(l);var o=s(8472),c=s(8726);let m=e=>({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}),u=(0,r.hg)("auth/initialize",async(e,t)=>{let{dispatch:s}=t;return new Promise(e=>{let t=(0,a.Aj)(d,r=>{s(b(r?m(r):null)),t(),e()})})}),x=(0,r.hg)("auth/register",async(e,t)=>{let{email:s,password:r,name:i}=e,{rejectWithValue:n}=t;try{let e=await (0,a.Xb)(d,s,r);return await (0,a.ck)(e.user,{displayName:i}),await o.Z.post("/api/auth",{uid:e.user.uid,email:e.user.email,name:i,photoURL:e.user.photoURL||""}),m(e.user)}catch(e){return console.error("Error during registration:",e),c.ZP.error(e.message),n(e.message)}}),h=(0,r.hg)("auth/login",async(e,t)=>{let{email:s,password:r}=e,{rejectWithValue:i}=t;try{let e=await (0,a.e5)(d,s,r);return m(e.user)}catch(e){return console.error("Error during login:",e),c.ZP.error(e.message),i(e.message)}}),g=(0,r.hg)("auth/loginWithGoogle",async(e,t)=>{let{rejectWithValue:s}=t;try{let e=new a.hJ,t=await (0,a.rh)(d,e);try{await o.Z.post("/api/auth",{uid:t.user.uid,email:t.user.email,name:t.user.displayName,photoURL:t.user.photoURL||""})}catch(e){console.log("User might already exist in the database.")}return m(t.user)}catch(e){return"auth/popup-blocked"===e.code?await (0,a.F6)(d,new a.hJ):(console.error("Error during Google login:",e),c.ZP.error(e.message)),s(e.message)}}),p=(0,r.hg)("auth/logout",async(e,t)=>{let{rejectWithValue:s}=t;try{await (0,a.w7)(d),c.ZP.success("Successfully logged out")}catch(e){return console.error("Error during logout:",e),c.ZP.error("Failed to log out"),s(e.message)}}),f=(0,r.hg)("auth/updateProfile",async(e,t)=>{let{getState:s,rejectWithValue:r}=t;s();let i=d.currentUser;if(!i)return r("No user logged in");try{return await (0,a.ck)(i,e),await o.Z.put("/api/auth/".concat(i.uid),{name:e.displayName,photoURL:e.photoURL}),c.ZP.success("Profile updated successfully"),e}catch(e){return console.error("Error updating profile:",e),c.ZP.error("Failed to update profile"),r(e.message)}}),y=(0,r.oM)({name:"auth",initialState:{currentUser:null,loading:!0,error:null},reducers:{setUser:(e,t)=>{e.currentUser=t.payload,e.loading=!1},setLoading:(e,t)=>{e.loading=t.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(x.pending,e=>{e.loading=!0,e.error=null}).addCase(x.fulfilled,(e,t)=>{e.currentUser=t.payload,e.loading=!1}).addCase(x.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(h.pending,e=>{e.loading=!0,e.error=null}).addCase(h.fulfilled,(e,t)=>{e.currentUser=t.payload,e.loading=!1}).addCase(h.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(g.pending,e=>{e.loading=!0,e.error=null}).addCase(g.fulfilled,(e,t)=>{e.currentUser=t.payload,e.loading=!1}).addCase(g.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(p.fulfilled,e=>{e.currentUser=null}).addCase(f.fulfilled,(e,t)=>{e.currentUser&&(e.currentUser={...e.currentUser,...t.payload})})}}),{setUser:b,setLoading:j,clearError:w}=y.actions;var v=y.reducer}},function(e){e.O(0,[139,18,344,233,839,971,23,744],function(){return e(e.s=1876)}),_N_E=e.O()}]);