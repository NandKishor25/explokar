(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[207],{9285:function(e,r,t){Promise.resolve().then(t.bind(t,9243))},1066:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var a=t(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,r)=>{let t=(0,a.forwardRef)((t,s)=>{let{color:o="currentColor",size:l=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:u="",children:m,...g}=t;return(0,a.createElement)("svg",{ref:s,...n,width:l,height:l,stroke:o,strokeWidth:c?24*Number(d)/Number(l):d,className:["lucide","lucide-".concat(i(e)),u].join(" "),...g},[...r.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},2335:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]])},4872:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]])},4241:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6081:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},4109:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9321:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},996:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},4542:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]])},1240:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6463:function(e,r,t){"use strict";var a=t(1169);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},9243:function(e,r,t){"use strict";t.r(r);var a=t(7437),n=t(2265),i=t(6463),s=t(7048),o=t(4241),l=t(1240),d=t(996),c=t(4872),u=t(6081),m=t(2335),g=t(4542),p=t(8472),h=t(8726),x=t(123);r.default=()=>{let{currentUser:e,loading:r}=(0,s.a)(),t=(0,i.useRouter)(),[f,y]=(0,n.useState)({title:"",startLocation:"",destination:"",startDate:"",duration:"",maxParticipants:"",preferredGender:"any",transportMode:"",description:"",budget:"",activities:""}),[b,v]=(0,n.useState)(!1),j=e=>{let{name:r,value:t}=e.target;y(e=>({...e,[r]:t}))},k=(e,r,t)=>{y(a=>({...a,[e]:r,["".concat(e,"Coords")]:t||void 0}))},N=e=>{y(r=>({...r,transportMode:e}))},w=async r=>{if(r.preventDefault(),!e){h.ZP.error("You must be logged in to create a trip"),t.push("/login");return}try{v(!0);let r={...f,userId:e.uid},a=await p.Z.post("/api/trips",r,{headers:{"Content-Type":"application/json"}});h.ZP.success("Trip created successfully!"),t.push("/trip/".concat(a.data._id))}catch(r){var a,n;console.error("Error creating trip:",r);let e=(null===(n=r.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message)||"Failed to create trip";h.ZP.error(e)}finally{v(!1)}};return r?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):e?(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Create a New Trip"}),(0,a.jsxs)("form",{onSubmit:w,className:"bg-white shadow-md rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Trip Title"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",required:!0,value:f.title,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Weekend Getaway to Bali"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{label:"Starting Location",name:"startLocation",value:f.startLocation,onChange:j,onPlaceSelect:(e,r)=>k("startLocation",e,r),required:!0})}),(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{label:"Destination",name:"destination",value:f.destination,onChange:j,onPlaceSelect:(e,r)=>k("destination",e,r),required:!0})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"date",id:"startDate",name:"startDate",required:!0,value:f.startDate,onChange:j,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (days)"}),(0,a.jsx)("input",{type:"number",id:"duration",name:"duration",required:!0,min:"1",value:f.duration,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 7"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"maxParticipants",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Participants"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"number",id:"maxParticipants",name:"maxParticipants",required:!0,min:"1",value:f.maxParticipants,onChange:j,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 4"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"preferredGender",className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Gender"}),(0,a.jsxs)("select",{id:"preferredGender",name:"preferredGender",value:f.preferredGender,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,a.jsx)("option",{value:"any",children:"Any"}),(0,a.jsx)("option",{value:"male",children:"Male"}),(0,a.jsx)("option",{value:"female",children:"Female"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode of Transport"}),(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>N("flight"),className:"flex flex-col items-center justify-center p-3 border rounded-md ".concat("flight"===f.transportMode?"bg-indigo-50 border-indigo-500":"border-gray-300"),children:[(0,a.jsx)(d.Z,{className:"h-6 w-6 ".concat("flight"===f.transportMode?"text-indigo-600":"text-gray-500")}),(0,a.jsx)("span",{className:"mt-1 text-xs",children:"Flight"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>N("bus"),className:"flex flex-col items-center justify-center p-3 border rounded-md ".concat("bus"===f.transportMode?"bg-indigo-50 border-indigo-500":"border-gray-300"),children:[(0,a.jsx)(c.Z,{className:"h-6 w-6 ".concat("bus"===f.transportMode?"text-indigo-600":"text-gray-500")}),(0,a.jsx)("span",{className:"mt-1 text-xs",children:"Bus"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>N("car"),className:"flex flex-col items-center justify-center p-3 border rounded-md ".concat("car"===f.transportMode?"bg-indigo-50 border-indigo-500":"border-gray-300"),children:[(0,a.jsx)(u.Z,{className:"h-6 w-6 ".concat("car"===f.transportMode?"text-indigo-600":"text-gray-500")}),(0,a.jsx)("span",{className:"mt-1 text-xs",children:"Car"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>N("bike"),className:"flex flex-col items-center justify-center p-3 border rounded-md ".concat("bike"===f.transportMode?"bg-indigo-50 border-indigo-500":"border-gray-300"),children:[(0,a.jsx)(m.Z,{className:"h-6 w-6 ".concat("bike"===f.transportMode?"text-indigo-600":"text-gray-500")}),(0,a.jsx)("span",{className:"mt-1 text-xs",children:"Bike"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>N("train"),className:"flex flex-col items-center justify-center p-3 border rounded-md ".concat("train"===f.transportMode?"bg-indigo-50 border-indigo-500":"border-gray-300"),children:[(0,a.jsx)(g.Z,{className:"h-6 w-6 ".concat("train"===f.transportMode?"text-indigo-600":"text-gray-500")}),(0,a.jsx)("span",{className:"mt-1 text-xs",children:"Train"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",required:!0,value:f.description,onChange:j,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe your trip..."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"activities",className:"block text-sm font-medium text-gray-700 mb-1",children:"Planned Activities"}),(0,a.jsx)("textarea",{id:"activities",name:"activities",value:f.activities,onChange:j,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Hiking, Beach, City Tour"})]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:b?"Creating...":"Create Trip"})})]})]}):(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please log in to create a trip"}),(0,a.jsx)("button",{onClick:()=>t.push("/login"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Log In"})]})})}},123:function(e,r,t){"use strict";t.d(r,{Z:function(){return d}});var a=t(7437),n=t(2265),i=t(9321),s=t(4109),o=t(8472);let l=()=>{let e;let[r,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(!1),[s,l]=(0,n.useState)(null),d=async e=>{if(!e||e.length<3){t([]);return}i(!0),l(null);try{let r=await o.Z.get("https://api.olamaps.io/places/v1/autocomplete",{params:{input:e,api_key:"tDJKPR8T7gl1yNKvDZhYJGTQ5YASTzrCbWR3Yd4k"}});r.data&&r.data.predictions?t(r.data.predictions):t([])}catch(e){console.error("Error fetching Ola Maps suggestions:",e),l("Failed to fetch location suggestions"),t([])}finally{i(!1)}},c=(0,n.useCallback)(function(){for(var r=arguments.length,t=Array(r),a=0;a<r;a++)t[a]=arguments[a];clearTimeout(e),e=setTimeout(()=>d(...t),500)},[]);return{suggestions:r,loading:a,error:s,getSuggestions:e=>{c(e)},clearSuggestions:()=>{t([])}}};var d=e=>{let{label:r,name:t,value:o,onChange:d,onPlaceSelect:c,placeholder:u="Search for a location",required:m=!1,className:g="",containerClassName:p=""}=e,[h,x]=(0,n.useState)(o),[f,y]=(0,n.useState)(!1),{suggestions:b,loading:v,getSuggestions:j,clearSuggestions:k}=l(),N=(0,n.useRef)(null);(0,n.useEffect)(()=>{x(o)},[o]),(0,n.useEffect)(()=>{let e=e=>{N.current&&!N.current.contains(e.target)&&y(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let w=e=>{var r;let t=e.description;x(t),c(t,(null===(r=e.geometry)||void 0===r?void 0:r.location)||null),y(!1),k()};return(0,a.jsxs)("div",{className:"relative ".concat(p),ref:N,children:[r&&(0,a.jsx)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1",children:r}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"text",id:t,name:t,required:m,value:h,onChange:e=>{let r=e.target.value;x(r),d(e),r.length>2?(j(r),y(!0)):(k(),y(!1))},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ".concat(g),placeholder:u,autoComplete:"off"}),v&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)(s.Z,{className:"animate-spin text-indigo-500",size:18})})]}),f&&b.length>0&&(0,a.jsx)("ul",{className:"absolute z-10 w-full bg-white mt-1 border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:b.map(e=>(0,a.jsxs)("li",{onClick:()=>w(e),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm text-gray-700 border-b border-gray-100 last:border-0",children:[(0,a.jsx)("div",{className:"font-medium",children:e.structured_formatting.main_text}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.structured_formatting.secondary_text})]},e.place_id))})]})}},7048:function(e,r,t){"use strict";t.d(r,{a:function(){return i}});var a=t(1444),n=t(7594);function i(){let e=(0,a.I0)(),{currentUser:r,loading:t,error:i}=(0,a.v9)(e=>e.auth);return{currentUser:r,loading:t,error:i,register:(r,t,a)=>e((0,n.z2)({email:r,password:t,name:a})),login:(r,t)=>e((0,n.x4)({email:r,password:t})),loginWithGoogle:()=>e((0,n.Cb)()),logout:()=>e((0,n.kS)()),updateUserProfile:r=>e((0,n.Lj)(r))}}},7594:function(e,r,t){"use strict";t.d(r,{ZP:function(){return k},uJ:function(){return m},x4:function(){return p},Cb:function(){return h},kS:function(){return x},z2:function(){return g},Lj:function(){return f}});var a=t(6862),n=t(5735),i=t(5236),s=t(9854);let o=(0,i.ZF)({apiKey:"AIzaSyCGhp1cC_bCwRHFzSrI3yTDJ9LOOlZy1i4",authDomain:"explokar-a27aa.firebaseapp.com",projectId:"explokar-a27aa",storageBucket:"explokar-a27aa.firebasestorage.app",messagingSenderId:"672347253575",appId:"1:672347253575:web:24ab4e1304c83a01277a62"}),l=(0,n.v0)(o);(0,s.cF)(o);var d=t(8472),c=t(8726);let u=e=>({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}),m=(0,a.hg)("auth/initialize",async(e,r)=>{let{dispatch:t}=r;return new Promise(e=>{let r=(0,n.Aj)(l,a=>{t(b(a?u(a):null)),r(),e()})})}),g=(0,a.hg)("auth/register",async(e,r)=>{let{email:t,password:a,name:i}=e,{rejectWithValue:s}=r;try{let e=await (0,n.Xb)(l,t,a);return await (0,n.ck)(e.user,{displayName:i}),await d.Z.post("/api/auth",{uid:e.user.uid,email:e.user.email,name:i,photoURL:e.user.photoURL||""}),u(e.user)}catch(e){return console.error("Error during registration:",e),c.ZP.error(e.message),s(e.message)}}),p=(0,a.hg)("auth/login",async(e,r)=>{let{email:t,password:a}=e,{rejectWithValue:i}=r;try{let e=await (0,n.e5)(l,t,a);return u(e.user)}catch(e){return console.error("Error during login:",e),c.ZP.error(e.message),i(e.message)}}),h=(0,a.hg)("auth/loginWithGoogle",async(e,r)=>{let{rejectWithValue:t}=r;try{let e=new n.hJ,r=await (0,n.rh)(l,e);try{await d.Z.post("/api/auth",{uid:r.user.uid,email:r.user.email,name:r.user.displayName,photoURL:r.user.photoURL||""})}catch(e){console.log("User might already exist in the database.")}return u(r.user)}catch(e){return"auth/popup-blocked"===e.code?await (0,n.F6)(l,new n.hJ):(console.error("Error during Google login:",e),c.ZP.error(e.message)),t(e.message)}}),x=(0,a.hg)("auth/logout",async(e,r)=>{let{rejectWithValue:t}=r;try{await (0,n.w7)(l),c.ZP.success("Successfully logged out")}catch(e){return console.error("Error during logout:",e),c.ZP.error("Failed to log out"),t(e.message)}}),f=(0,a.hg)("auth/updateProfile",async(e,r)=>{let{getState:t,rejectWithValue:a}=r;t();let i=l.currentUser;if(!i)return a("No user logged in");try{return await (0,n.ck)(i,e),await d.Z.put("/api/auth/".concat(i.uid),{name:e.displayName,photoURL:e.photoURL}),c.ZP.success("Profile updated successfully"),e}catch(e){return console.error("Error updating profile:",e),c.ZP.error("Failed to update profile"),a(e.message)}}),y=(0,a.oM)({name:"auth",initialState:{currentUser:null,loading:!0,error:null},reducers:{setUser:(e,r)=>{e.currentUser=r.payload,e.loading=!1},setLoading:(e,r)=>{e.loading=r.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(g.pending,e=>{e.loading=!0,e.error=null}).addCase(g.fulfilled,(e,r)=>{e.currentUser=r.payload,e.loading=!1}).addCase(g.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}).addCase(p.pending,e=>{e.loading=!0,e.error=null}).addCase(p.fulfilled,(e,r)=>{e.currentUser=r.payload,e.loading=!1}).addCase(p.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}).addCase(h.pending,e=>{e.loading=!0,e.error=null}).addCase(h.fulfilled,(e,r)=>{e.currentUser=r.payload,e.loading=!1}).addCase(h.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}).addCase(x.fulfilled,e=>{e.currentUser=null}).addCase(f.fulfilled,(e,r)=>{e.currentUser&&(e.currentUser={...e.currentUser,...r.payload})})}}),{setUser:b,setLoading:v,clearError:j}=y.actions;var k=y.reducer}},function(e){e.O(0,[139,18,344,971,23,744],function(){return e(e.s=9285)}),_N_E=e.O()}]);