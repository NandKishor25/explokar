(()=>{var e={};e.id=906,e.ids=[906],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},12647:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),s(55590),s(40139),s(35866),s(15495);var r=s(23191),i=s(88716),a=s(37922),n=s.n(a),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["(main)",{children:["trip",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,55590)),"/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/trip/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,40139)),"/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,15495)),"/Users/guidertechnologies/Downloads/explokar-main 2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/trip/[id]/page.tsx"],m="/(main)/trip/[id]/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/trip/[id]/page",pathname:"/trip/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},96240:(e,t,s)=>{Promise.resolve().then(s.bind(s,5935))},97697:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]])},5894:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]])},81536:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},71821:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},26641:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},33734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},94258:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]])},5935:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Z});var r=s(10326),i=s(17577),a=s(35047),n=s(90434),l=s(74131),d=s(26641),o=s(94258),c=s(81536),m=s(5894),x=s(97697),u=s(77636),h=s(37358),p=s(71821),g=s(24061);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,s(76557).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var y=s(24861),b=s(40381),j=s(2453),w=s(94019),v=s(33734),N=s(88003);let k=({isOpen:e,onClose:t,reviewerId:s,revieweeId:a,revieweeName:n,tripId:l})=>{let[d,o]=(0,i.useState)(0),[c,m]=(0,i.useState)(""),[x,u]=(0,i.useState)(0),[h,p]=(0,i.useState)(!1);if(!e)return null;let g=async e=>{if(e.preventDefault(),0===d){b.ZP.error("Please select a rating");return}try{p(!0),await N.p.createReview({reviewer:s,reviewee:a,tripId:l,rating:d,comment:c}),b.ZP.success(`Review submitted for ${n}`),t(),o(0),m("")}catch(e){console.error("Error submitting review:",e),e.response?.data?.message?b.ZP.error(e.response.data.message):b.ZP.error("Failed to submit review")}finally{p(!1)}};return r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto w-screen h-screen",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t,children:r.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),r.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full",children:(0,r.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Rate ",n]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:r.jsx(w.Z,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"mt-4",children:(0,r.jsxs)("form",{onSubmit:g,children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),r.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(e=>r.jsx("button",{type:"button",className:"focus:outline-none transition-colors",onMouseEnter:()=>u(e),onMouseLeave:()=>u(0),onClick:()=>o(e),children:r.jsx(v.Z,{className:`w-8 h-8 ${e<=(x||d)?"text-amber-400 fill-current":"text-gray-300"}`})},e))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d>0?`You selected ${d} stars`:"Select stars to rate"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comment"}),r.jsx("textarea",{id:"comment",rows:4,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md p-3 border",placeholder:"Share your experience travelling with them...",value:c,onChange:e=>m(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[r.jsx("button",{type:"submit",disabled:h,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm disabled:opacity-50",children:h?"Submitting...":"Submit Review"}),r.jsx("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:"Cancel"})]})]})})]})})]})})},Z=({params:e})=>{let{id:t}=e,{currentUser:s}=(0,l.a)(),w=(0,a.useRouter)(),[v,N]=(0,i.useState)(null),[Z,P]=(0,i.useState)([]),[q,C]=(0,i.useState)(""),[M,S]=(0,i.useState)(!0),[U,R]=(0,i.useState)(!1),[D,T]=(0,i.useState)(!1),[I,B]=(0,i.useState)(!1),[L,$]=(0,i.useState)(null),[A,_]=(0,i.useState)(!1),[E,z]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=async()=>{try{S(!0);let e=await y.e.getTripById(t);N(e);let s=await y.e.getComments(t);P(s)}catch(e){console.error("Error fetching trip details:",e),b.ZP.error("Failed to load trip details")}finally{S(!1)}};t&&e()},[t]);let F=async()=>{if(s)try{T(!0),await y.e.leaveTrip(t,{userId:s.uid}),v&&N({...v,participants:v.participants.filter(e=>e.userId!==s.uid)}),b.ZP.success("Successfully left the trip")}catch(e){console.error("Error leaving trip:",e),b.ZP.error("Failed to leave trip")}finally{T(!1)}},G=async()=>{if(v&&s&&window.confirm("Are you sure you want to delete this trip? This action cannot be undone."))try{S(!0),await y.e.deleteTrip(t),b.ZP.success("Trip deleted successfully"),w.push("/")}catch(e){console.error("Error deleting trip:",e),b.ZP.error("Failed to delete trip"),S(!1)}},H=async e=>{if(e.preventDefault(),!s){b.ZP.error("You must be logged in to comment");return}if(q.trim())try{R(!0);let e=await y.e.addComment(t,{userId:s.uid,userName:s.displayName||"User",userPhoto:s.photoURL||"",text:q});P([...Z,e]),C(""),b.ZP.success("Comment added")}catch(e){console.error("Error adding comment:",e),b.ZP.error("Failed to add comment")}finally{R(!1)}},O=e=>{if(!e)return"Date not set";let t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";try{return(0,j.WU)(t,"MMMM d, yyyy")}catch(e){return"Invalid Date"}},Y=()=>!!s&&!!v&&v.participants.some(e=>e.userId===s.uid),J=()=>{if(!v)return null;switch(v.transportMode){case"flight":return r.jsx(d.Z,{className:"w-5 h-5 text-indigo-600"});case"train":return r.jsx(o.Z,{className:"w-5 h-5 text-indigo-600"});case"car":return r.jsx(c.Z,{className:"w-5 h-5 text-indigo-600"});case"bus":return r.jsx(m.Z,{className:"w-5 h-5 text-indigo-600"});case"bike":return r.jsx(x.Z,{className:"w-5 h-5 text-indigo-600"});default:return null}};if(M)return r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})});if(!v)return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Trip not found"}),r.jsx(n.default,{href:"/",className:"text-indigo-600 hover:text-indigo-800",children:"Return to home page"})]});let V=async e=>{if(e.preventDefault(),s)try{T(!0),await y.e.joinTrip(t,{userId:s.uid,name:s.displayName||"User",photoURL:s.photoURL||"",message:E}),b.ZP.success("Request sent successfully!"),_(!1)}catch(t){console.error("Error joining trip:",t);let e=t.response?.data?.message||t.message||"Failed to send request";b.ZP.error(e)}finally{T(!1)}};return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[A&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-2xl transform transition-all",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Request to Join"}),r.jsx("p",{className:"text-gray-500 mb-4 text-sm",children:"Send a message to the trip organizer introducing yourself."}),(0,r.jsxs)("form",{onSubmit:V,children:[r.jsx("textarea",{value:E,onChange:e=>z(e.target.value),placeholder:"Hi! I'd love to join your trip because...",className:"w-full border border-gray-300 rounded-lg p-3 mb-4 focus:ring-2 focus:ring-indigo-500 focus:border-transparent min-h-[100px]",required:!0}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[r.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:D,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:D?"Sending...":"Send Request"})]})]})]})}),(0,r.jsxs)("div",{className:"relative h-96 rounded-xl overflow-hidden mb-8",children:[r.jsx("img",{src:v.imageUrl||"https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",alt:v.title,className:"w-full h-full object-cover"}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col justify-end p-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:v.title}),(0,r.jsxs)("div",{className:"flex items-center text-white mb-4",children:[r.jsx(u.Z,{className:"w-5 h-5 mr-1"}),(0,r.jsxs)("span",{className:"text-lg",children:[v.startLocation," to ",v.destination]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-white",children:[r.jsx(h.Z,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:O(v.startDate)})]}),r.jsx("div",{className:"flex items-center bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-white",children:(0,r.jsxs)("span",{children:[v.duration," days"]})}),v.transportMode&&(0,r.jsxs)("div",{className:"flex items-center bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-white",children:[J(),r.jsx("span",{className:"ml-1 capitalize",children:v.transportMode})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Trip Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Start Date"}),r.jsx("p",{className:"text-lg font-medium",children:O(v.startDate)})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"}),(0,r.jsxs)("p",{className:"text-lg font-medium",children:[v.duration," days"]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"From"}),r.jsx("p",{className:"text-lg font-medium",children:v.startLocation})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"To"}),r.jsx("p",{className:"text-lg font-medium",children:v.destination})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Transport"}),(0,r.jsxs)("div",{className:"flex items-center",children:[J(),r.jsx("span",{className:"ml-1 text-lg font-medium capitalize",children:v.transportMode})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Budget"}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.Z,{className:"w-5 h-5 text-indigo-600"}),r.jsx("span",{className:"ml-1 text-lg font-medium",children:v.budget?`$${v.budget}`:"Not specified"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Group Size"}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(g.Z,{className:"w-5 h-5 text-indigo-600"}),(0,r.jsxs)("span",{className:"ml-1 text-lg font-medium",children:[v.participants.length," / ",v.maxParticipants+1," travelers"]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Preferred Gender"}),r.jsx("p",{className:"text-lg font-medium capitalize",children:v.preferredGender})]})]}),v.activities&&(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Activities"}),r.jsx("p",{className:"text-lg",children:v.activities})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"}),r.jsx("p",{className:"text-lg whitespace-pre-line",children:v.description})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Comments"}),s?r.jsx("form",{onSubmit:H,className:"mb-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:s.photoURL?r.jsx("img",{src:s.photoURL,alt:s.displayName||"User",className:"h-10 w-10 rounded-full"}):r.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:s.displayName?s.displayName.charAt(0).toUpperCase():"U"})}),r.jsx("div",{className:"min-w-0 flex-1",children:(0,r.jsxs)("div",{className:"border border-gray-300 rounded-lg shadow-sm overflow-hidden focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500",children:[r.jsx("textarea",{rows:3,name:"comment",id:"comment",className:"block w-full py-3 px-4 border-0 resize-none focus:ring-0 focus:outline-none sm:text-sm",placeholder:"Add a comment...",value:q,onChange:e=>C(e.target.value)}),r.jsx("div",{className:"py-2 px-4 bg-gray-50 flex justify-end",children:r.jsx("button",{type:"submit",disabled:U||!q.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:U?"Posting...":"Post"})})]})})]})}):(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"You need to be logged in to comment"}),r.jsx(n.default,{href:"/login",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Log in"})]}),0===Z.length?(0,r.jsxs)("div",{className:"text-center py-6",children:[r.jsx(f,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No comments yet"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Be the first to share your thoughts."})]}):r.jsx("div",{className:"space-y-6",children:Z.map(e=>(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:e.userPhoto?r.jsx("img",{src:e.userPhoto,alt:e.userName,className:"h-10 w-10 rounded-full"}):r.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:e.userName.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.userName}),r.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),r.jsx("p",{className:"mt-1 text-sm text-gray-700",children:e.text})]})]},e._id))})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-1",children:[(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Trip Organizer"}),r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"h-12 w-12 rounded-full overflow-hidden mr-4",children:v.createdBy.photoURL?r.jsx("img",{src:v.createdBy.photoURL,alt:v.createdBy.name,className:"h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:v.createdBy.name.charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:v.createdBy.name}),r.jsx("p",{className:"text-sm text-gray-500",children:v.createdBy.email})]})]}),s&&s.uid!==v.userId&&Y()&&r.jsx("button",{onClick:()=>{$({uid:v.userId,name:v.createdBy.name}),B(!0)},className:"mt-3 text-xs bg-indigo-50 text-indigo-600 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition-colors font-medium border border-indigo-100",children:"Rate Organizer"})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Participants"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden mr-3",children:v.createdBy.photoURL?r.jsx("img",{src:v.createdBy.photoURL,alt:v.createdBy.name,className:"h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:v.createdBy.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.createdBy.name}),r.jsx("p",{className:"text-xs text-gray-500",children:"Organizer"})]}),s&&s.uid!==v.userId&&Y()&&r.jsx("button",{onClick:()=>{$({uid:v.userId,name:v.createdBy.name}),B(!0)},className:"text-xs bg-indigo-50 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-100 transition-colors",children:"Rate"})]}),v.participants.map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden mr-3",children:e.photoURL?r.jsx("img",{src:e.photoURL,alt:e.name,className:"h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:e.name.charAt(0).toUpperCase()})}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name})}),s&&s.uid!==e.userId&&Y()&&r.jsx("button",{onClick:()=>{$({uid:e.userId,name:e.name}),B(!0)},className:"text-xs bg-indigo-50 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-100 transition-colors",children:"Rate"})]},e.userId)),Array.from({length:v.maxParticipants-v.participants.length}).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center opacity-50",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 mr-3 flex items-center justify-center",children:r.jsx(g.Z,{className:"h-5 w-5 text-gray-400"})}),r.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Available Spot"})]},t))]})]}),L&&s&&r.jsx(k,{isOpen:I,onClose:()=>B(!1),reviewerId:s.uid,revieweeId:L.uid,revieweeName:L.name,tripId:t}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[Y()&&r.jsx(n.default,{href:`/trip/${t}/expenses`,className:"block w-full text-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 mb-3",children:"Manage Expenses"}),!(s&&v&&v.userId===s.uid)&&r.jsx(r.Fragment,{children:Y()?r.jsx("button",{onClick:F,disabled:D,className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:D?"Processing...":"Leave Trip"}):v.participants.length<v.maxParticipants?r.jsx("button",{onClick:()=>{if(!s){w.push("/login");return}_(!0)},disabled:D,className:"w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:s?D?"Processing...":"Request to Join":"Login to Join"}):r.jsx("button",{disabled:!0,className:"w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-400 cursor-not-allowed",children:"Trip Full"})}),!!s&&!!v&&v.userId===s.uid&&r.jsx("button",{onClick:G,className:"w-full px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50",children:"Delete Trip"})]})]})]})}},51471:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=s(94464).Z.create({headers:{"Content-Type":"application/json"}})},88003:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(51471);let i={createReview:async e=>(await r.Z.post("/api/reviews",e)).data,getUserReviews:async e=>(await r.Z.get(`/api/reviews/user/${e}`)).data}},24861:(e,t,s)=>{"use strict";s.d(t,{e:()=>i});var r=s(51471);let i={searchTrips:async e=>(await r.Z.get(`/api/trips/search?${e.toString()}`)).data,getTripById:async e=>(await r.Z.get(`/api/trips/${e}`)).data,getUserTrips:async e=>(await r.Z.get(`/api/trips/user/${e}`)).data,createTrip:async e=>(await r.Z.post("/api/trips",e)).data,deleteTrip:async e=>(await r.Z.delete(`/api/trips/${e}`)).data,joinTrip:async(e,t)=>(await r.Z.post(`/api/trips/${e}/join`,t)).data,leaveTrip:async(e,t)=>(await r.Z.post(`/api/trips/${e}/leave`,t)).data,getComments:async e=>(await r.Z.get(`/api/trips/${e}/comments`)).data,addComment:async(e,t)=>(await r.Z.post(`/api/trips/${e}/comments`,t)).data,getExpenses:async e=>{try{return(await r.Z.get(`/api/trips/${e}/expenses`)).data}catch(e){return console.warn("Expense API not ready, returning mock data"),[]}},addExpense:async(e,t)=>(await r.Z.post(`/api/trips/${e}/expenses`,t)).data,deleteExpense:async(e,t)=>(await r.Z.delete(`/api/trips/${e}/expenses/${t}`)).data}},55590:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var r=s(68570);let i=(0,r.createProxy)(String.raw`/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/trip/[id]/page.tsx`),{__esModule:a,$$typeof:n}=i;i.default;let l=(0,r.createProxy)(String.raw`/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/trip/[id]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,19,382,762,9],()=>s(12647));module.exports=r})();