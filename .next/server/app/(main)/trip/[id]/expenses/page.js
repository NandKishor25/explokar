(()=>{var e={};e.id=15,e.ids=[15],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},46043:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>l}),s(44752),s(40139),s(35866),s(15495);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),d=s(95231),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(t,o);let l=["",{children:["(main)",{children:["trip",{children:["[id]",{children:["expenses",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,44752)),"/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/trip/[id]/expenses/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,40139)),"/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,15495)),"/Users/guidertechnologies/Downloads/explokar-main 2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/trip/[id]/expenses/page.tsx"],p="/(main)/trip/[id]/expenses/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/trip/[id]/expenses/page",pathname:"/trip/[id]/expenses",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},87555:(e,t,s)=>{Promise.resolve().then(s.bind(s,87952))},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6507:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},6021:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]])},71821:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},90748:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},98091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},79635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},24061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},94019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(76557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},87952:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(10326),a=s(17577),i=s(35047),n=s(90434),d=s(74131),o=s(24861),l=s(86333),c=s(83855),p=s(71821),x=s(24061);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,s(76557).Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var m=s(98091),h=s(40381);let g=()=>{let e=(0,i.useParams)(),t=e?.id,{currentUser:s}=(0,d.a)(),[g,y]=(0,a.useState)(null),[f,j]=(0,a.useState)([]),[w,b]=(0,a.useState)(!0),[v,N]=(0,a.useState)(!1),[k,Z]=(0,a.useState)({description:"",amount:"",category:"Food",date:new Date().toISOString().split("T")[0]});(0,a.useEffect)(()=>{(async()=>{if(t)try{b(!0);let[e,s]=await Promise.all([o.e.getTripById(t),o.e.getExpenses(t)]);y(e),j(s)}catch(e){console.error("Error fetching data:",e),h.ZP.error("Failed to load expenses")}finally{b(!1)}})()},[t]);let q=async e=>{if(e.preventDefault(),t&&s)try{let e=await o.e.addExpense(t,{...k,amount:parseFloat(k.amount),paidBy:s.uid,splitAmong:g?.participants.map(e=>e.userId)||[],tripId:t});j([...f,e]),N(!1),Z({description:"",amount:"",category:"Food",date:new Date().toISOString().split("T")[0]}),h.ZP.success("Expense added")}catch(e){console.error("Error adding expense:",e),h.ZP.error("Failed to add expense")}},P=async e=>{if(t&&window.confirm("Delete this expense?"))try{await o.e.deleteExpense(t,e),j(f.filter(t=>t._id!==e)),h.ZP.success("Expense deleted")}catch(e){console.error("Error deleting expense:",e),h.ZP.error("Failed to delete expense")}},M=f.reduce((e,t)=>e+t.amount,0),E=g?.participants?M/g.participants.length:0;return w?r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):g?(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(n.default,{href:`/trip/${t}`,className:"flex items-center text-indigo-600 hover:text-indigo-800 mb-4",children:[r.jsx(l.Z,{className:"w-4 h-4 mr-1"})," Back to Trip"]}),(0,r.jsxs)("div",{className:"flex justify-between items-end",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Expenses"}),(0,r.jsxs)("p",{className:"text-gray-500",children:["Manage costs for ",g.title]})]}),(0,r.jsxs)("button",{onClick:()=>N(!v),className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-md",children:[r.jsx(c.Z,{className:"w-5 h-5 mr-2"})," Add Expense"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full text-green-600 mr-4",children:r.jsx(p.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Spent"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",M.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full text-blue-600 mr-4",children:r.jsx(x.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Participants"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.participants.length})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-full text-purple-600 mr-4",children:r.jsx(u,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Per Person"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",E.toFixed(2)]})]})]})]}),v&&(0,r.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-gray-100 mb-8 animate-in slide-in-from-top-4 duration-300",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Add New Expense"}),(0,r.jsxs)("form",{onSubmit:q,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",placeholder:"Description (e.g., Dinner)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:k.description,onChange:e=>Z({...k,description:e.target.value}),required:!0}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),r.jsx("input",{type:"number",placeholder:"Amount",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:k.amount,onChange:e=>Z({...k,amount:e.target.value}),required:!0,min:"0",step:"0.01"})]}),(0,r.jsxs)("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:k.category,onChange:e=>Z({...k,category:e.target.value}),children:[r.jsx("option",{children:"Food"}),r.jsx("option",{children:"Transport"}),r.jsx("option",{children:"Accommodation"}),r.jsx("option",{children:"Activity"}),r.jsx("option",{children:"Other"})]}),r.jsx("input",{type:"date",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:k.date,onChange:e=>Z({...k,date:e.target.value}),required:!0}),r.jsx("button",{type:"submit",className:"md:col-span-2 bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition-colors",children:"Save Expense"})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid By"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:0===f.length?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-gray-500",children:"No expenses recorded yet."})}):f.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.description}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:e.category})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.participants.find(t=>t.userId===e.paidBy)?.name||"Unknown"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium",children:["$",e.amount.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx("button",{onClick:()=>P(e._id),className:"text-red-400 hover:text-red-600 transition-colors",children:r.jsx(m.Z,{className:"w-4 h-4"})})})]},e._id))})]})})})]}):r.jsx("div",{className:"text-center py-20",children:"Trip not found"})}},51471:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=s(94464).Z.create({headers:{"Content-Type":"application/json"}})},24861:(e,t,s)=>{"use strict";s.d(t,{e:()=>a});var r=s(51471);let a={searchTrips:async e=>(await r.Z.get(`/api/trips/search?${e.toString()}`)).data,getTripById:async e=>(await r.Z.get(`/api/trips/${e}`)).data,getUserTrips:async e=>(await r.Z.get(`/api/trips/user/${e}`)).data,createTrip:async e=>(await r.Z.post("/api/trips",e)).data,deleteTrip:async e=>(await r.Z.delete(`/api/trips/${e}`)).data,joinTrip:async(e,t)=>(await r.Z.post(`/api/trips/${e}/join`,t)).data,leaveTrip:async(e,t)=>(await r.Z.post(`/api/trips/${e}/leave`,t)).data,getComments:async e=>(await r.Z.get(`/api/trips/${e}/comments`)).data,addComment:async(e,t)=>(await r.Z.post(`/api/trips/${e}/comments`,t)).data,getExpenses:async e=>{try{return(await r.Z.get(`/api/trips/${e}/expenses`)).data}catch(e){return console.warn("Expense API not ready, returning mock data"),[]}},addExpense:async(e,t)=>(await r.Z.post(`/api/trips/${e}/expenses`,t)).data,deleteExpense:async(e,t)=>(await r.Z.delete(`/api/trips/${e}/expenses/${t}`)).data}},44752:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>d});var r=s(68570);let a=(0,r.createProxy)(String.raw`/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/trip/[id]/expenses/page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let d=(0,r.createProxy)(String.raw`/Users/guidertechnologies/Downloads/explokar-main 2/src/app/(main)/trip/[id]/expenses/page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,19,382,9],()=>s(46043));module.exports=r})();